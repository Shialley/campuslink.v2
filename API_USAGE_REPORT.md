# CampusLink v2 - API æ¥å£ä½¿ç”¨æƒ…å†µåˆ†ææŠ¥å‘Š

ç”Ÿæˆæ—¶é—´ï¼š2025å¹´12æœˆ2æ—¥

## ğŸ“Š API æ¥å£æ€»è§ˆ

### âœ… å·²ä½¿ç”¨çš„æ¥å£ (18ä¸ª)

#### 1. è®¤è¯ç›¸å…³ (3ä¸ª)
- âœ… `loginUser` - ç™»å½•æ¥å£
  - ä½¿ç”¨ä½ç½®ï¼š`app/login.tsx`
  
- âœ… `registerUser` - æ³¨å†Œæ¥å£
  - ä½¿ç”¨ä½ç½®ï¼š`app/register.tsx`
  
- âœ… `changePassword` - ä¿®æ”¹å¯†ç 
  - ä½¿ç”¨ä½ç½®ï¼š`app/edit-profile.tsx`

#### 2. å¸–å­ç›¸å…³ (6ä¸ª)
- âœ… `getPosts` - è·å–å¸–å­åˆ—è¡¨ï¼ˆæ”¯æŒæ ‡ç­¾è¿‡æ»¤ï¼‰
  - ä½¿ç”¨ä½ç½®ï¼š`app/index.tsx`
  
- âœ… `getPost` - è·å–å•ä¸ªå¸–å­è¯¦æƒ…
  - ä½¿ç”¨ä½ç½®ï¼š`app/PostDetail.tsx`
  
- âœ… `sendPost` - å‘å¸ƒå¸–å­
  - ä½¿ç”¨ä½ç½®ï¼š`app/post.tsx`
  
- âœ… `getUserPosts` - è·å–ç”¨æˆ·å‘å¸ƒçš„å¸–å­
  - ä½¿ç”¨ä½ç½®ï¼š`app/previous-posts.tsx`, `app/Profile.tsx`
  
- âœ… `likePost` - ç‚¹èµå¸–å­
  - ä½¿ç”¨ä½ç½®ï¼š`app/index.tsx`, `app/PostDetail.tsx`, `app/Profile.tsx`
  
- âœ… `savePost` - æ”¶è—å¸–å­
  - ä½¿ç”¨ä½ç½®ï¼š`app/index.tsx`, `app/PostDetail.tsx`, `app/my-favorites.tsx`

#### 3. è¯„è®ºç›¸å…³ (2ä¸ª)
- âœ… `sendComment` - å‘è¡¨è¯„è®º
  - ä½¿ç”¨ä½ç½®ï¼š`app/PostDetail.tsx`
  
- âœ… `likeComment` - ç‚¹èµè¯„è®º
  - ä½¿ç”¨ä½ç½®ï¼š`app/PostDetail.tsx`

#### 4. ç”¨æˆ·ç›¸å…³ (3ä¸ª)
- âœ… `getUserProfile` - è·å–ç”¨æˆ·ä¿¡æ¯
  - ä½¿ç”¨ä½ç½®ï¼š`app/Profile.tsx`, `app/edit-profile.tsx`
  
- âœ… `updateUserProfile` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  - ä½¿ç”¨ä½ç½®ï¼š`app/edit-profile.tsx`
  
- âœ… `getSaves` - è·å–æ”¶è—åˆ—è¡¨
  - ä½¿ç”¨ä½ç½®ï¼š`app/my-favorites.tsx`

#### 5. å…³æ³¨ç›¸å…³ (2ä¸ª)
- âœ… `followUser` - å…³æ³¨ç”¨æˆ·
  - ä½¿ç”¨ä½ç½®ï¼š`app/PostDetail.tsx`
  
- âœ… `unfollowUser` - å–æ¶ˆå…³æ³¨
  - ä½¿ç”¨ä½ç½®ï¼š`app/PostDetail.tsx`

#### 6. å›¾ç‰‡ç›¸å…³ (2ä¸ª)
- âœ… `uploadImage` - ä¸Šä¼ å•å¼ å›¾ç‰‡
  - ä½¿ç”¨ä½ç½®ï¼š`app/post.tsx`, `app/edit-profile.tsx`
  
- âœ… `getImageUrl` - è·å–å›¾ç‰‡URL
  - ä½¿ç”¨ä½ç½®ï¼šå¤šå¤„ä½¿ç”¨

---

### âš ï¸ æœªä½¿ç”¨çš„æ¥å£ (8ä¸ª)

#### 1. æ¶ˆæ¯/é€šçŸ¥ç›¸å…³ (5ä¸ª)
- âŒ `getDirectMessages` - è·å–ç§ä¿¡åˆ—è¡¨
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šå¦‚éœ€å®ç°ç§ä¿¡åŠŸèƒ½ï¼Œéœ€åˆ›å»ºæ¶ˆæ¯é¡µé¢
  
- âŒ `getTargetedMessages` - è·å–å®šå‘æ¶ˆæ¯
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šå®šå‘æ¶ˆæ¯åŠŸèƒ½æœªå®ç°
  
- âŒ `getCommentNotifications` - è·å–è¯„è®ºé€šçŸ¥
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šå¯åœ¨é€šçŸ¥é¡µé¢ä¸­ä½¿ç”¨
  
- âŒ `sendDirectMessage` - å‘é€ç§ä¿¡
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šéœ€é…åˆç§ä¿¡åˆ—è¡¨é¡µé¢ä½¿ç”¨
  
- âŒ `markMessageAsRead` - æ ‡è®°æ¶ˆæ¯å·²è¯»
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šéœ€é…åˆæ¶ˆæ¯åŠŸèƒ½ä½¿ç”¨

#### 2. ç¤¾äº¤ç›¸å…³ (1ä¸ª)
- âŒ `getFollowing` - è·å–å…³æ³¨åˆ—è¡¨
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šå¯åœ¨ä¸ªäººä¸»é¡µæˆ–ç¤¾äº¤é¡µé¢ä¸­ä½¿ç”¨

#### 3. ç»Ÿè®¡ç›¸å…³ (2ä¸ª)
- âŒ `getLikeCount` - è·å–å¸–å­ç‚¹èµæ•°
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šå¸–å­æ•°æ®ä¸­å·²åŒ…å«ç‚¹èµæ•°ï¼Œå¯èƒ½ä¸éœ€è¦å•ç‹¬è°ƒç”¨
  
- âŒ `getEnergyPoint` - è·å–ç§¯åˆ†
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šå¯åœ¨èƒ½é‡é¡µé¢ (`app/energy.tsx`) ä¸­ä½¿ç”¨

#### 4. å…¶ä»– (1ä¸ª)
- âŒ `getUserLikes` - è·å–ç”¨æˆ·ç‚¹èµåˆ—è¡¨
  - **çŠ¶æ€**ï¼šæœªåœ¨ä»»ä½•é¡µé¢ä¸­è°ƒç”¨
  - **å»ºè®®**ï¼šå¯åœ¨ç”¨æˆ·ä¸»é¡µä¸­æ˜¾ç¤ºç”¨æˆ·ç‚¹èµè¿‡çš„å¸–å­

---

## ğŸ“ˆ ä½¿ç”¨ç‡ç»Ÿè®¡

- **æ€»æ¥å£æ•°**ï¼š26 ä¸ª
- **å·²ä½¿ç”¨**ï¼š18 ä¸ª (69.2%)
- **æœªä½¿ç”¨**ï¼š8 ä¸ª (30.8%)

### æŒ‰åŠŸèƒ½åˆ†ç±»ç»Ÿè®¡

| åŠŸèƒ½ç±»åˆ« | æ€»æ•° | å·²ä½¿ç”¨ | æœªä½¿ç”¨ | ä½¿ç”¨ç‡ |
|---------|------|--------|--------|--------|
| è®¤è¯ç›¸å…³ | 3 | 3 | 0 | 100% |
| å¸–å­ç›¸å…³ | 7 | 6 | 1 | 85.7% |
| è¯„è®ºç›¸å…³ | 2 | 2 | 0 | 100% |
| ç”¨æˆ·ç›¸å…³ | 4 | 3 | 1 | 75% |
| å…³æ³¨ç›¸å…³ | 3 | 2 | 1 | 66.7% |
| å›¾ç‰‡ç›¸å…³ | 3 | 2 | 1 | 66.7% |
| æ¶ˆæ¯é€šçŸ¥ | 5 | 0 | 5 | 0% |

---

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. å¯ä»¥åˆ é™¤çš„æ¥å£ (éœ€ç¡®è®¤)
å¦‚æœä»¥ä¸‹åŠŸèƒ½ç¡®å®ä¸éœ€è¦ï¼Œå¯ä»¥è€ƒè™‘åˆ é™¤ç›¸å…³ä»£ç ï¼š

```typescript
// æ¶ˆæ¯ç›¸å…³ - å¦‚æœä¸åšç§ä¿¡åŠŸèƒ½
- getDirectMessages
- sendDirectMessage
- markMessageAsRead
- getTargetedMessages
- getCommentNotifications
```

### 2. åº”è¯¥ä½¿ç”¨çš„æ¥å£
ä»¥ä¸‹æ¥å£å·²å®ç°ä½†æœªä½¿ç”¨ï¼Œå»ºè®®è¡¥å……åŠŸèƒ½ï¼š

#### ä¼˜å…ˆçº§ HIGH
- âœ¨ `getEnergyPoint` - åœ¨èƒ½é‡é¡µé¢æ˜¾ç¤ºç§¯åˆ†
  ```typescript
  // ä½ç½®ï¼šapp/energy.tsx
  // ç”¨é€”ï¼šæ˜¾ç¤ºç”¨æˆ·å½“å‰ç§¯åˆ†
  ```

#### ä¼˜å…ˆçº§ MEDIUM
- âœ¨ `getFollowing` - æ˜¾ç¤ºå…³æ³¨åˆ—è¡¨
  ```typescript
  // ä½ç½®ï¼šapp/Profile.tsx æˆ–æ–°å»º app/following.tsx
  // ç”¨é€”ï¼šæŸ¥çœ‹ç”¨æˆ·å…³æ³¨çš„äºº
  ```

- âœ¨ `getUserLikes` - æ˜¾ç¤ºç‚¹èµåˆ—è¡¨
  ```typescript
  // ä½ç½®ï¼šapp/Profile.tsx æˆ– app/my-favorites.tsx
  // ç”¨é€”ï¼šæŸ¥çœ‹ç”¨æˆ·ç‚¹èµè¿‡çš„å¸–å­
  ```

#### ä¼˜å…ˆçº§ LOW
- `getLikeCount` - ç›®å‰å¸–å­æ•°æ®å·²åŒ…å«ç‚¹èµæ•°ï¼Œå¯èƒ½ä¸éœ€è¦

### 3. å»ºè®®æ–°å¢é¡µé¢

å¦‚æœè¦ä½¿ç”¨æ¶ˆæ¯ç›¸å…³æ¥å£ï¼Œå»ºè®®åˆ›å»ºï¼š
- `app/messages.tsx` - æ¶ˆæ¯åˆ—è¡¨é¡µé¢
- `app/notifications.tsx` - é€šçŸ¥é¡µé¢
- `app/chat.tsx` - èŠå¤©é¡µé¢

---

## ğŸ”§ ä»£ç æ¸…ç†å»ºè®®

### é€‰é¡¹ Aï¼šä¿ç•™æ‰€æœ‰æ¥å£
å¦‚æœæœªæ¥å¯èƒ½éœ€è¦è¿™äº›åŠŸèƒ½ï¼Œå¯ä»¥ä¿ç•™æ‰€æœ‰æ¥å£ï¼Œä½†æ·»åŠ æ³¨é‡Šæ ‡è®°ï¼š

```typescript
// âš ï¸ æœªä½¿ç”¨ - é¢„ç•™ç”¨äºæœªæ¥æ¶ˆæ¯åŠŸèƒ½
export const getDirectMessages = async (token: string) => { ... }
```

### é€‰é¡¹ Bï¼šåˆ é™¤æœªä½¿ç”¨æ¥å£
å¦‚æœç¡®å®šä¸éœ€è¦æŸäº›åŠŸèƒ½ï¼Œå¯ä»¥åˆ é™¤ç›¸å…³ä»£ç ä»¥å‡å°‘ç»´æŠ¤æˆæœ¬ï¼š

1. åˆ é™¤ API å‡½æ•°
2. åˆ é™¤å¯¹åº”çš„ Mock å‡½æ•°
3. æ›´æ–°æ–‡æ¡£

### é€‰é¡¹ Cï¼šå®ç°ç¼ºå¤±åŠŸèƒ½
è¡¥å……ä½¿ç”¨æœªä½¿ç”¨çš„æ¥å£ï¼Œå®Œå–„åº”ç”¨åŠŸèƒ½ã€‚

---

## ğŸ“ æ¥å£å®Œæ•´åˆ—è¡¨

### è®¤è¯ (Authentication)
- [x] `loginUser(loginData, token)`
- [x] `registerUser(registerData, token)`
- [x] `changePassword(oldPassword, newPassword, token)`

### å¸–å­ (Posts)
- [x] `getPosts(page, token, tagFilter?)`
- [x] `getPost(postid, token)`
- [x] `sendPost(postData, token)`
- [x] `getUserPosts(page, token)`
- [x] `likePost(postId, token)`
- [x] `savePost(postId, token)`
- [ ] `getLikeCount(postId, token)` âš ï¸

### è¯„è®º (Comments)
- [x] `sendComment(commentData, token)`
- [x] `likeComment(commentId, token)`

### ç”¨æˆ· (User)
- [x] `getUserProfile(token)`
- [x] `updateUserProfile(profileData, token)`
- [x] `getSaves(token)`
- [ ] `getUserLikes(token)` âš ï¸

### å…³æ³¨ (Follow)
- [x] `followUser(followedId, token)`
- [x] `unfollowUser(followedId, token)`
- [ ] `getFollowing(token)` âš ï¸

### å›¾ç‰‡ (Images)
- [x] `uploadImage(imageUri, token)`
- [x] `uploadImages(imageUris, token)`
- [x] `getImage(key, token)`
- [x] `getImageUrl(key, token?)`

### æ¶ˆæ¯é€šçŸ¥ (Messages & Notifications)
- [ ] `getDirectMessages(token)` âš ï¸
- [ ] `getTargetedMessages(token)` âš ï¸
- [ ] `getCommentNotifications(token)` âš ï¸
- [ ] `sendDirectMessage(recipientId, content, token)` âš ï¸
- [ ] `markMessageAsRead(messageId, token)` âš ï¸

### å…¶ä»– (Others)
- [ ] `getEnergyPoint(token)` âš ï¸

---

## ğŸ¯ æ€»ç»“

å½“å‰é¡¹ç›®çš„ API æ¥å£ä½¿ç”¨ç‡ä¸º **69.2%**ï¼Œæ ¸å¿ƒåŠŸèƒ½ï¼ˆè®¤è¯ã€å¸–å­ã€è¯„è®ºï¼‰çš„æ¥å£éƒ½å·²è¢«ä½¿ç”¨ã€‚

**æœªä½¿ç”¨çš„æ¥å£ä¸»è¦é›†ä¸­åœ¨ï¼š**
1. **æ¶ˆæ¯/é€šçŸ¥ç³»ç»Ÿ** (5ä¸ªæ¥å£) - åŠŸèƒ½æœªå®ç°
2. **ç¤¾äº¤åŠŸèƒ½æ‰©å±•** (2ä¸ªæ¥å£) - éƒ¨åˆ†å®ç°
3. **ç§¯åˆ†ç³»ç»Ÿ** (1ä¸ªæ¥å£) - åŠŸèƒ½æœªå®ç°

**å»ºè®®ï¼š**
- å¦‚æœä¸æ‰“ç®—å®ç°æ¶ˆæ¯åŠŸèƒ½ï¼Œå¯ä»¥åˆ é™¤ç›¸å…³æ¥å£ä»¥ç®€åŒ–ä»£ç 
- å»ºè®®å®ç° `getEnergyPoint` æ¥å£ï¼Œå®Œå–„èƒ½é‡é¡µé¢åŠŸèƒ½
- è€ƒè™‘å®ç° `getFollowing` å’Œ `getUserLikes`ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒ
